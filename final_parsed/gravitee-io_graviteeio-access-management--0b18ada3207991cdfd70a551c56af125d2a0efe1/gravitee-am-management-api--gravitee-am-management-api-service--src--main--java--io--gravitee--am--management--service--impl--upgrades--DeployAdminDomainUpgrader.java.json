[
    {
        "repo_name": "gravitee-io_graviteeio-access-management",
        "commit": "0b18ada3207991cdfd70a551c56af125d2a0efe1",
        "rev_path": "gravitee-am-management-api/gravitee-am-management-api-service/src/main/java/io/gravitee/am/management/service/impl/upgrades/DeployAdminDomainUpgrader.java",
        "definition": "@Component\npublic class DeployAdminDomainUpgrader implements Upgrader, Ordered {\n\n    private static final Logger logger = LoggerFactory.getLogger(DeployAdminDomainUpgrader.class);\n    private final static String ADMIN_DOMAIN = \"admin\";\n\n    @Autowired\n    private DomainService domainService;\n\n    @Autowired\n    private EventManager eventManager;\n\n    @Override\n    public boolean upgrade() {\n        logger.info(\"Deploying registered {} domain\", ADMIN_DOMAIN);\n        domainService.findById(ADMIN_DOMAIN)\n                .switchIfEmpty(Maybe.error(new DomainNotFoundException(ADMIN_DOMAIN)))\n                .subscribe(\n                        adminDomain -> eventManager.publishEvent(DomainEvent.DEPLOY, adminDomain),\n                        error -> {\n                            logger.error(\"Failed to find admin domain\", error);\n                            throw new IllegalStateException(\"Failed to deploy admin domain\", error);\n                        }\n                );\n        return true;\n    }\n\n    @Override\n    public int getOrder() {\n        return 170;\n    }\n}",
        "package": "package io.gravitee.am.management.service.impl.upgrades;",
        "tree_path": "DeployAdminDomainUpgrader",
        "name": "DeployAdminDomainUpgrader",
        "modifiers": "@Component\npublic",
        "superclass": null,
        "super_interfaces": "implements Upgrader, Ordered",
        "body": "{\n\n    private static final Logger logger = LoggerFactory.getLogger(DeployAdminDomainUpgrader.class);\n    private final static String ADMIN_DOMAIN = \"admin\";\n\n    @Autowired\n    private DomainService domainService;\n\n    @Autowired\n    private EventManager eventManager;\n\n    @Override\n    public boolean upgrade() {\n        logger.info(\"Deploying registered {} domain\", ADMIN_DOMAIN);\n        domainService.findById(ADMIN_DOMAIN)\n                .switchIfEmpty(Maybe.error(new DomainNotFoundException(ADMIN_DOMAIN)))\n                .subscribe(\n                        adminDomain -> eventManager.publishEvent(DomainEvent.DEPLOY, adminDomain),\n                        error -> {\n                            logger.error(\"Failed to find admin domain\", error);\n                            throw new IllegalStateException(\"Failed to deploy admin domain\", error);\n                        }\n                );\n        return true;\n    }\n\n    @Override\n    public int getOrder() {\n        return 170;\n    }\n}",
        "start_point": {
            "row": 32,
            "column": 0
        },
        "end_point": {
            "row": 63,
            "column": 1
        },
        "file_mode": "Modified",
        "map_path": null,
        "methods": [
            {
                "definition": "@Override\npublic boolean upgrade() {\n    logger.info(\"Deploying registered {} domain\", ADMIN_DOMAIN);\n    domainService.findById(ADMIN_DOMAIN)\n            .switchIfEmpty(Maybe.error(new DomainNotFoundException(ADMIN_DOMAIN)))\n            .subscribe(\n                    adminDomain -> eventManager.publishEvent(DomainEvent.DEPLOY, adminDomain),\n                    error -> {\n                        logger.error(\"Failed to find admin domain\", error);\n                        throw new IllegalStateException(\"Failed to deploy admin domain\", error);\n                    }\n            );\n    return true;\n}",
                "name": "upgrade",
                "modifiers": "@Override\n    public",
                "return_type": null,
                "parameters": [],
                "body": "{\n    logger.info(\"Deploying registered {} domain\", ADMIN_DOMAIN);\n    domainService.findById(ADMIN_DOMAIN)\n            .switchIfEmpty(Maybe.error(new DomainNotFoundException(ADMIN_DOMAIN)))\n            .subscribe(\n                    adminDomain -> eventManager.publishEvent(DomainEvent.DEPLOY, adminDomain),\n                    error -> {\n                        logger.error(\"Failed to find admin domain\", error);\n                        throw new IllegalStateException(\"Failed to deploy admin domain\", error);\n                    }\n            );\n    return true;\n}",
                "start_point": {
                    "row": 44,
                    "column": 4
                },
                "end_point": {
                    "row": 57,
                    "column": 5
                }
            },
            {
                "definition": "@Override\npublic int getOrder() {\n    return 170;\n}",
                "name": "getOrder",
                "modifiers": "@Override\n    public",
                "return_type": null,
                "parameters": [],
                "body": "{\n    return 170;\n}",
                "start_point": {
                    "row": 59,
                    "column": 4
                },
                "end_point": {
                    "row": 62,
                    "column": 5
                }
            }
        ]
    }
]